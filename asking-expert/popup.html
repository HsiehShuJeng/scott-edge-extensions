<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Scott's Assistant for English Learning and Programming</title>
    <!-- Modular CSS: popup styling -->
    <link rel="stylesheet" href="styles/popup-base.css">
    <link rel="stylesheet" href="styles/popup-theme.css">
    <link rel="stylesheet" href="styles/popup-buttons.css">
    <link rel="stylesheet" href="styles/popup-error.css">
    <link rel="stylesheet" href="styles/popup-tooltip.css">
    <link rel="stylesheet" href="styles/popup-activity.css">
    <link rel="stylesheet" href="styles/popup-flags.css">
    <link rel="stylesheet" href="styles/popup-commit.css">
    <link rel="stylesheet" href="styles/popup-development-routines.css">
    <link rel="stylesheet" href="styles/popup-tabs.css">
</head>

<body>
    <div id="theme-toggle-container">
        <input type="checkbox" id="theme-toggle" hidden>
        <label for="theme-toggle" class="toggle-switch">
            <span class="sun">‚òÄÔ∏è</span>
            <span class="moon">üåô</span>
        </label>
    </div>
    <!-- Tab Navigation -->
    <div class="tab-navigation">
        <button class="tab-button active" data-tab="language" type="button">
            <span class="tab-text-short">L</span>
            <span class="tab-text-full">Language</span>
        </button>
        <button class="tab-button" data-tab="video" type="button">
            <span class="tab-text-short">V</span>
            <span class="tab-text-full">Video</span>
        </button>
    </div>

    <!-- Language Tab Content -->
    <div id="language-tab" class="tab-content active">
        <div class="flag-switcher">
            <button class="flag-button" id="english-btn" type="button">
                <img src="images/usa-flag.png" alt="USA Flag">
            </button>
            <button class="flag-button" id="korean-btn" type="button">
                <img src="images/korean-flag.png" alt="Korean Flag">
            </button>
        </div>

        <!-- English Learning Section -->
        <div id="english-section" class="english-section">
            <h2>Scott's Assistant for English Learning</h2>
            <div class="activity-controls">
                <!-- Accessible button labels -->
                <div class="button-container-vertical">
                    <button id="start-english" class="modern-btn" aria-label="Start English Session" type="button">Start</button>
                    <button id="end-english" class="modern-btn" aria-label="End English Session" type="button">Finish</button>
                </div>

                <!-- Label for dropdown -->
                <label for="locality-dropdown"></label>
                <select id="locality-dropdown" aria-label="Select locality code" class="dropdown">
                    <option value="1" selected>1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <!-- Add more options as needed -->
                </select>
                <div class="dropdown-info">
                    1: Taipei Work<br>
                    2: Taipei Home<br>
                    3: Hualien Home
                </div>

                <!-- Label for result input -->
                <label for="result-english"></label>
                <input type="text" id="result-english" readonly aria-label="Session command result">
            </div>
            <input type="text" id="words" placeholder="Word" class="input-control">
            <textarea id="sentence" rows="6" placeholder="Optional sentence (context)" class="input-control"></textarea>
            <div class="button-container"> <!-- Wrapper for buttons for better styling control -->
                <button id="generate" class="modern-btn" type="button">Build Contextual Prompt</button>
                <button id="generate_image" class="modern-btn" type="button">Build Image Prompt</button>
                <button id="translate_zh" class="modern-btn" type="button">Translate to Traditional Chinese</button>
                <button id="translate_en" class="modern-btn" type="button">Translate to English</button>
            </div>
        </div>

        <!-- Korean Learning Section -->
        <div id="korean-section">
            <h2>Scott's Assistant for Korean Learning</h2>
            <div class="activity-controls">
                <!-- Accessible button labels -->
                <div class="button-container-vertical">
                    <button id="start-korean" class="modern-btn" aria-label="Start Korean Session" type="button">Start</button>
                    <button id="end-korean" class="modern-btn" aria-label="End Korean Session" type="button">Finish</button>
                </div>

                <!-- Label for dropdown -->
                <label for="locality-dropdown-korean"></label>
                <select id="locality-dropdown-korean" aria-label="Select locality code" class="dropdown">
                    <option value="1" selected>1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <!-- Add more options as needed -->
                </select>
                <div class="dropdown-info">
                    1: Taipei Work<br>
                    2: Taipei Home<br>
                    3: Hualien Home
                </div>

                <!-- Label for result input -->
                <label for="result-korean"></label>
                <input type="text" id="result-korean" readonly aria-label="Session command result">
            </div>
            <textarea id="korean-word" rows="6" placeholder="Korean Sentences (Words)" class="input-control"></textarea>
            <button id="generate-korean" class="modern-btn" type="button">Build Contextual Prompt</button>
        </div>

        <!-- Programming Section -->
        <h2>Scott's Assistant for Programming</h2>
        <div id="commit-tools" class="commit-tools-container">
            <button class="commit-btn" data-command="1" type="button">Current Changes</button>
            <button class="commit-btn" data-command="2" type="button">Staged Changes</button>
            <button class="commit-btn" data-command="3" type="button">Range Changes</button>
        </div>

        <div id="development-routines" class="development-routines-container">
            <!-- Left side: Branch Name Suggestion -->
            <div class="dev-routine-section dev-routine-left">
                <textarea id="branch-description" rows="4"
                    placeholder="Feature to implement or bug to fix&#10;&#10;Example:&#10;Add user authentication with email validation&#10;Fix memory leak in image processing module"
                    class="input-control dev-routine-textarea" aria-label="Feature description or bug report"></textarea>
                <button id="generate-branch-prompt" class="dev-routine-btn" type="button"
                    aria-label="Generate branch naming prompt">Generate Branch Prompt</button>
            </div>
            
            <!-- Right side: PR Command Generation (existing) -->
            <div class="dev-routine-section dev-routine-right">
                <textarea id="pr-description" rows="4"
                    placeholder="PR Title and Description&#10;&#10;Example:&#10;feat(auth): add user login validation&#10;&#10;- Add email validation&#10;- Implement password strength check&#10;- Update login form UI"
                    class="input-control dev-routine-textarea" aria-label="Pull request title and description"></textarea>
                <button id="generate-pr-command" class="dev-routine-btn" type="button"
                    aria-label="Generate pull request command">Generate PR Command</button>
            </div>
        </div>

        <div class="tooltip">
            <span id="credits">Icon Credits</span>
            <div class="tooltiptext">
                <a href="https://www.flaticon.com/free-icons/dictionary" target="_blank" rel="noopener">
                    Dictionary icons created by Freepik - Flaticon
                </a>
            </div>
        </div>
    </div>

    <!-- Video Tab Content -->
    <div id="video-tab" class="tab-content">
        <h2>Video Question Extractor</h2>
        <div class="video-section">
            <p class="instruction-text">Extract 10 questions and options from DeepSRT challenge pages</p>
            
            <!-- Video ID Input Section -->
            <div class="video-id-section">
                <label for="video-id-input" class="video-id-label">Video ID:</label>
                <div class="video-id-container">
                    <input type="text" id="video-id-input" class="video-id-input" placeholder="Auto-detected or enter manually">
                    <button id="video-id-action" class="video-id-action" type="button" title="Copy ID and open YouTube">
                        <svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/>
                        </svg>
                    </button>
                </div>
            </div>
            
            <!-- Extract Button - Centered -->
            <div class="extract-button-container">
                <button id="extract-questions" class="modern-btn extract-btn" type="button">Extract Questions from Current Page</button>
            </div>
            
            <div id="extraction-status" class="status-message"></div>
        </div>
    </div>
    <script type="module" src="popup.js"></script>
</body>

</html>